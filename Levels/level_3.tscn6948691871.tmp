[gd_scene format=3 uid="uid://c3ljh254cjt6y"]

[ext_resource type="Script" uid="uid://t4dj34ak738h" path="res://scripts/level_scripts/level_3_script.gd" id="1_absw3"]
[ext_resource type="PackedScene" uid="uid://c40wam1h4bbim" path="res://player.tscn" id="2_padch"]
[ext_resource type="PackedScene" uid="uid://ix6f7k7no2cy" path="res://assets/Rooms/level 3.fbx" id="4_absw3"]
[ext_resource type="Script" uid="uid://cy7lu8yj5ftfp" path="res://Levels/animation_player.gd" id="4_ck3gp"]
[ext_resource type="PackedScene" uid="uid://bnedn4yrh0wcn" path="res://assets/Interior/Heavy Door.fbx" id="4_padch"]
[ext_resource type="Script" path="res://scripts/interactable.gd" id="5_ay5qi"]
[ext_resource type="PackedScene" uid="uid://cl4in25rybv8g" path="res://assets/Interior/Heavy Door Gear.fbx" id="5_uwxw1"]
[ext_resource type="Script" uid="uid://cmh4u5muw2ukh" path="res://assets/Interior/interactive-door-gear.gd" id="6_uwxw1"]
[ext_resource type="Script" uid="uid://bkp2sadgwydn6" path="res://Levels/collision_shape_3d.gd" id="8_fa81k"]

[sub_resource type="BoxShape3D" id="BoxShape3D_rf6l5"]
size = Vector3(1.7089844, 2.5734253, 1.7480469)

[sub_resource type="Animation" id="Animation_v0hej"]
length = 0.001
tracks/0/type = "rotation_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("DOOR/DoorPivot/Heavy Door/GearPivot")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, 0, 1)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("DOOR/DoorPivot")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0, 0, 0)

[sub_resource type="Animation" id="Animation_7utdd"]
resource_name = "gear_turn"
length = 7.0
tracks/0/type = "rotation_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("DOOR/DoorPivot/Heavy Door/GearPivot")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, 0, 0, 1, 1.1, 1, 1, 0, 0, -4.371139e-08, 2.2333333, 1, 8.742278e-08, 0, 0, 1)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("DOOR/DoorPivot/Heavy Door/GearPivot")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, -24.85, 0, 0)
tracks/2/type = "position_3d"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("DOOR/DoorPivot")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = PackedFloat32Array(0, 1, -0.33, 0, 0, 3.3, 1, -0.33, 0, 0)
tracks/3/type = "rotation_3d"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("DOOR/DoorPivot")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = PackedFloat32Array(0, 1, 0, 0, 0, 1, 3.3, 1, 0, 0, 0, 1, 6.6666665, 1, 0, 0.70710677, 0, 0.70710677)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_padch"]
_data = {
&"RESET": SubResource("Animation_v0hej"),
&"gear_turn": SubResource("Animation_7utdd")
}

[sub_resource type="BoxShape3D" id="BoxShape3D_ay5qi"]

[node name="Level_root" type="Node3D" unique_id=529749610]
script = ExtResource("1_absw3")

[node name="Player" parent="." unique_id=1736146828 instance=ExtResource("2_padch")]
transform = Transform3D(0.9999987, 0.0009431247, -0.0012656815, -0.0009443764, 0.99999905, -0.0009974701, 0.0012647478, 0.0009986538, 0.9999987, 34.818333, 0.064456224, 1.2216187)

[node name="OmniLight3D" type="OmniLight3D" parent="." unique_id=1932472595]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.1002371, 0)
omni_attenuation = 2.0

[node name="Outside" type="Area3D" parent="." unique_id=392560475]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0675478, 1.5282626, 5.7228594)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Outside" unique_id=1476365948]
shape = SubResource("BoxShape3D_rf6l5")

[node name="Level_exit" type="Area3D" parent="." unique_id=1082983013]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0337739, 1.5548258, -6.194135)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Level_exit" unique_id=180121975]
shape = SubResource("BoxShape3D_rf6l5")

[node name="level 3" parent="." unique_id=1281860565 instance=ExtResource("4_absw3")]
transform = Transform3D(1.2, 0, 0, 0, 1.8199999, 0, 0, 0, 1.4, 4.6415462, 1.4944205, 1.0221863)

[node name="OmniLight3D2" type="OmniLight3D" parent="." unique_id=77892620]
light_energy = 12.0
omni_range = 42.792305

[node name="OmniLight3D3" type="OmniLight3D" parent="." unique_id=899162115]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30.863789, 1.1957605, 0.92100143)
light_energy = 6.0
omni_range = 10.0

[node name="DOOR" type="Node3D" parent="." unique_id=1808111286]
transform = Transform3D(-1, 0, 1.1331662e-07, 0, 1.7270968, 0, -8.742278e-08, 0, -1.296191, -15.782608, 1.3163066, 2.3306246)

[node name="AnimationPlayer" type="AnimationPlayer" parent="DOOR" unique_id=1836803246]
root_node = NodePath("../..")
libraries/ = SubResource("AnimationLibrary_padch")
script = ExtResource("4_ck3gp")

[node name="DoorPivot" type="Node3D" parent="DOOR" unique_id=2037323731]

[node name="Heavy Door" parent="DOOR/DoorPivot" unique_id=1074841333 instance=ExtResource("4_padch")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.0268829)

[node name="GearPivot" type="Node3D" parent="DOOR/DoorPivot/Heavy Door" unique_id=805983728]

[node name="StaticBody3D" type="StaticBody3D" parent="DOOR/DoorPivot/Heavy Door/GearPivot" unique_id=937474536]
script = ExtResource("5_ay5qi")

[node name="Heavy Door Gear" parent="DOOR/DoorPivot/Heavy Door/GearPivot/StaticBody3D" unique_id=431105340 instance=ExtResource("5_uwxw1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -24.790737, 0.049999893, 0.049999952)
script = ExtResource("6_uwxw1")

[node name="CollisionShape3D" type="CollisionShape3D" parent="DOOR/DoorPivot/Heavy Door/GearPivot/StaticBody3D" unique_id=1646514502]
transform = Transform3D(0.99999994, 0, -7.1054274e-15, 0, 0.32941255, 0, 0, 0, 0.35424954, -0.24114323, 0, 0)
shape = SubResource("BoxShape3D_ay5qi")
script = ExtResource("8_fa81k")

[connection signal="body_entered" from="Outside" to="." method="_on_outside_body_entered"]
[connection signal="pressed" from="DOOR/DoorPivot/Heavy Door/GearPivot/StaticBody3D/CollisionShape3D" to="." method="_on_collision_shape_3d_pressed"]
[connection signal="pressed" from="DOOR/DoorPivot/Heavy Door/GearPivot/StaticBody3D/CollisionShape3D" to="." method="_on_collision_shape_3d_pressed"]
